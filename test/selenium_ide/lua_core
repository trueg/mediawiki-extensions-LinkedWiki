<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://wiki.serverdev-mediawiki-v1/" />
<title>lua_core</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">lua_core</td></tr>
</thead><tbody>
<tr>
	<td>store</td>
	<td>javascript{&quot;TestPage&quot;+Math.random()}</td>
	<td>Title</td>
</tr>
<tr>
	<td>open</td>
	<td>/index.php?title=Module:LinkedWikiTest${Title}&amp;action=edit</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=wpTextbox1</td>
	<td>-- @copyright (c) 2016 Bourdercloud.com<br/>-- @author Karima Rafes &lt;karima.rafes@bordercloud.com&gt;<br/>-- @link http://www.mediawiki.org/wiki/Extension:LinkedWiki<br/>-- @license CC-by-nc-sa V3.0<br/>--<br/>--  Last version : http://github.com/BorderCloud/LinkedWiki<br/>--<br/>--<br/>-- This work is licensed under the Creative Commons<br/>-- Attribution-NonCommercial-ShareAlike 3.0<br/>-- Unported License. To view a copy of this license,<br/>-- visit http://creativecommons.org/licenses/by-nc-sa/3.0/<br/>-- or send a letter to Creative Commons,<br/>-- 171 Second Street, Suite 300, San Francisco,<br/>-- California, 94105, USA.<br/><br/>--[[<br/>-- Debug console<br/><br/>frame = mw.getCurrentFrame() -- Get a frame object<br/>newFrame = frame:newChild{ -- Get one with args<br/>	title = 'test' ,<br/> args = {<br/> iri = 'http://daap.eu/wiki/Lip(Sys)2/RamanEvolution_Spectrometer'<br/>    }<br/>}<br/><br/>mw.log(p.tests(newFrame) )<br/><br/>]]<br/><br/>local p = {}<br/><br/>function p.checkLitteral(query, litteral)<br/>    local result = ''<br/>    if string.match(query, litteral) then<br/>        result = &quot;OK&quot;<br/>    else<br/>        result = &quot;KO&quot;<br/>    end<br/>    return result<br/>end<br/><br/><br/>function p.checkString(val1, val2)<br/>    local result = ''<br/>    if (val1 ==  nil or val2 ==  nil) then<br/>        result = &quot;KO&quot;<br/>    else<br/>        if val1 ==  val2 then<br/>            result = &quot;OK&quot;<br/>        else<br/>            result = &quot;KO&quot;<br/>        end<br/>    end<br/>    return result<br/>end<br/>function p.checkNumber(val1, val2)<br/>    local result = ''<br/>    if (val1 ==  nil or val2 ==  nil) then<br/>        result = &quot;KO&quot;<br/>    else<br/>        if tonumber(val1) ==  tonumber(val2) then<br/>            result = &quot;OK&quot;<br/>        else<br/>            result = &quot;KO&quot;<br/>        end<br/>    end<br/>    return result<br/>end<br/><br/><br/>function p.tests(f)<br/><br/>    local linkedwiki = require 'linkedwiki'<br/>    local endpoint = 'http://database-test:8890/sparql'<br/>    local config = 'http://database-test/data'<br/><br/><br/>    local xsd = 'http://www.w3.org/2001/XMLSchema#'<br/><br/>    local pr = 'http://database-test/Property:'<br/><br/>    local html = '== TESTS =='.. '\n'<br/><br/>    --linkedwiki.setDebug(true)<br/>    local subject = f.args.iri or linkedwiki.getCurrentIRI();<br/>    html = html ..&quot;TEST : linkedwiki.getCurrentIRI()&quot; .. '\n'<br/>    html = html ..&quot;RESULT : &quot; .. subject .. '\n'<br/><br/>    linkedwiki.setConfig(config)<br/><br/>    local subject = linkedwiki.getCurrentIRI();<br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : linkedwiki.explode&quot; ..'\n'<br/><br/>    local str1 = &quot;&quot;<br/>    local str2 = &quot;el1&quot;<br/>    local str3 = &quot;el1;el2&quot;<br/>    local arrTestExplode1 = linkedwiki.explode(&quot;;&quot;,str1)<br/>    local arrTestExplode2 = linkedwiki.explode(&quot;;&quot;,str2)<br/>    local arrTestExplode3 = linkedwiki.explode(&quot;;&quot;,str3)<br/>    html = html ..&quot;RESULT : 0==&quot; ..table.getn(arrTestExplode1).. ' \n'<br/>    html = html ..&quot;RESULT : 1==&quot; ..table.getn(arrTestExplode2).. ' \n'<br/>    html = html ..&quot;RESULT : 2==&quot; ..table.getn(arrTestExplode3).. ' \n'<br/><br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : linkedwiki.timeStamp&quot; ..'\n'<br/><br/>    local dateStringArg1 = &quot;1971-01-01&quot;<br/>    local dateStringArg2 = &quot;31536000&quot;<br/>    html = html ..&quot;CHECK : timestamp(&quot; ..dateStringArg1.. ')= '..dateStringArg2..'\n'<br/>    html = html ..linkedwiki.timeStamp(dateStringArg1).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(linkedwiki.timeStamp(dateStringArg1), dateStringArg2).. ' \n'<br/><br/>    local dateStringArg1 = &quot;1972-01-01&quot;<br/>    local dateStringArg2 = &quot;63072000&quot;<br/>    html = html ..&quot;CHECK : timestamp(&quot; ..dateStringArg1.. ')= '..dateStringArg2..'\n'<br/>    html = html ..linkedwiki.timeStamp(dateStringArg1).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(linkedwiki.timeStamp(dateStringArg1), dateStringArg2).. ' \n'<br/><br/><br/>    local dateStringArg1 = &quot;1970-01-11T01:10:00+02:00&quot;<br/>    local dateStringArg2 = &quot;861000&quot;<br/>    html = html ..&quot;CHECK : timestamp(&quot; ..dateStringArg1.. ')= '..dateStringArg2..'\n'<br/>    html = html ..linkedwiki.timeStamp(dateStringArg1).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(linkedwiki.timeStamp(dateStringArg1), dateStringArg2).. ' \n'<br/><br/><br/>    local dateStringArg1 = &quot;1970-01-01&quot;<br/>    local dateStringArg2 = &quot;1970-01-01T00:00:00Z&quot;<br/>    html = html ..&quot;CHECK : &quot; ..dateStringArg1.. '=='..dateStringArg2..'\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(linkedwiki.timeStamp(dateStringArg1), linkedwiki.timeStamp(dateStringArg2)).. ' \n'<br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : getValue &amp; addPropertyWithIri without default subject&quot; ..'\n'<br/><br/>    mw.log(linkedwiki.removeSubject(subject))<br/><br/>    html = html ..&quot;Insert &quot; .. pr..'Test'..'\n'<br/>    mw.log(linkedwiki.addPropertyWithIri(pr..'type',pr..'Test',subject))<br/>    local tabStr = linkedwiki.getValue(pr..'type',subject)<br/>--    mw.log(linkedwiki.getLastQuery())<br/>    local arr = linkedwiki.explode(&quot;;&quot;,tabStr)<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>--    html = html ..&quot;RESULT : &quot; ..tabStr.. '\n'<br/>--<br/>--    for i, iri in ipairs(arr) do<br/>--        html = html .. i .. &quot; : &quot; .. iri .. '\n'<br/>--    end<br/><br/>    html = html ..&quot;Insert &quot; .. pr..'Test2'..'\n'<br/>    mw.log(linkedwiki.addPropertyWithIri(pr..'type',pr..'Test2',subject))<br/>    local tabStr2 = linkedwiki.getValue(pr..'type',subject)<br/>--    mw.log(linkedwiki.getLastQuery())<br/>    local arr2 = linkedwiki.explode(&quot;;&quot;,tabStr2)<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr2).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr2), 2).. ' \n'<br/>--    html = html ..&quot;RESULT : &quot; ..tabStr2.. '\n'<br/>--<br/>--    for i, iri in ipairs(arr2) do<br/>--        html = html .. i .. &quot; : &quot; .. iri .. '\n'<br/>--    end<br/><br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject(subject))<br/>    local tabStr3 = linkedwiki.getValue(pr..'type',subject)<br/>--    mw.log(linkedwiki.getLastQuery())<br/>    local arr3 = linkedwiki.explode(&quot;;&quot;,tabStr3)<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr3).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr3), 0).. ' \n'<br/>--    html = html ..&quot;RESULT : &quot; ..tabStr3.. '\n'<br/>--<br/>--    for i, iri in ipairs(arr3) do<br/>--        html = html .. i .. &quot; : &quot; .. iri .. '\n'<br/>--    end<br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : getValue &amp; addPropertyWithIri with default subject&quot; ..'\n'<br/><br/>    linkedwiki.setSubject(subject)<br/>    linkedwiki.removeSubject() -- delete all triples of this subject<br/><br/>    html = html ..&quot;Insert &quot; .. pr..'Test'..'\n'<br/>    mw.log(linkedwiki.addPropertyWithIri(pr..'type',pr..'Test'))<br/>    local arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pr..'type'))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>    html = html ..&quot;Insert &quot; .. pr..'Test2'..'\n'<br/>    mw.log(linkedwiki.addPropertyWithIri(pr..'type',pr..'Test2'))<br/>    local arr2 = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pr..'type'))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr2).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr2), 2).. ' \n'<br/><br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject())<br/>    local arr3 = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pr..'type'))<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr3), 0).. ' \n'<br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : getValue &amp; addPropertyWithLitteral&quot; ..'\n'<br/><br/>    --linkedwiki.addPropertyWithLitteral(iriProperty, value, type, tagLang, iriSubject)<br/>    --default lang is en in extension.json<br/>    local pT =''<br/>    local litteral=''<br/>    local query=''<br/>    local result = &quot;&quot;<br/>    local arr = {}<br/><br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : text with lang tag &quot; ..'\n'<br/><br/>    pT = pr..'1'<br/>    litteral='\&quot;\&quot;\&quot;text\&quot;\&quot;\&quot;@en'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',&quot;text&quot;)'..'\n'<br/>    html = html ..&quot;Insert text === &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,&quot;text&quot;))<br/>    query= linkedwiki.getLastQuery()<br/>    --mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>    pT = pr..'2'<br/>    litteral='\&quot;\&quot;\&quot;text\&quot;\&quot;\&quot;@en'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',&quot;text&quot;,nil)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,&quot;text&quot;,nil))<br/>    query= linkedwiki.getLastQuery()<br/>    --mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>    pT = pr..'3'<br/>    litteral='\&quot;\&quot;\&quot;text\&quot;\&quot;\&quot;@fr'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',&quot;text&quot;,nil,&quot;fr&quot;)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,&quot;text&quot;,nil,&quot;fr&quot;))<br/>    query= linkedwiki.getLastQuery()<br/>    --mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>    pT = pr..'4'<br/>    litteral='\&quot;\&quot;\&quot;text\&quot;\&quot;\&quot;'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',&quot;text&quot;,nil,&quot;&quot;)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,&quot;text&quot;,nil,&quot;&quot;))<br/>    query= linkedwiki.getLastQuery()<br/>    mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>    pT = pr..'5'<br/>    litteral='\&quot;\&quot;\&quot;text\&quot;\&quot;\&quot;'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',&quot;text&quot;,nil,nil)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,&quot;text&quot;,nil,nil))<br/>    query= linkedwiki.getLastQuery()<br/>    mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>    pT = pr..'6'<br/>    litteral='\&quot;\&quot;\&quot;text\&quot;\&quot;\&quot;'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',&quot;text&quot;,nil,nil)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,&quot;text&quot;,nil,nil))<br/>    query= linkedwiki.getLastQuery()<br/>    mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject())<br/><br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : integer&quot; ..'\n'<br/><br/>    pT = pr..'7'<br/>    litteral='2'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',2)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,2))<br/>    query= linkedwiki.getLastQuery()<br/>    mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/><br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject())<br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : decimal&quot; ..'\n'<br/><br/>    pT = pr..'8'<br/>    litteral='&quot;2&quot;^^&lt;'..xsd..&quot;decimal&quot;..'&gt;'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',2,xsd..&quot;decimal&quot;)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,2,xsd..&quot;decimal&quot;))<br/>    query= linkedwiki.getLastQuery()<br/>    mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(arr[1], 2).. ' \n'<br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject())<br/><br/><br/>    pT = pr..'9'<br/>    litteral='2.1'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',2.1)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,2.1))<br/>    query= linkedwiki.getLastQuery()<br/>    mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/><br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(arr[1], 2.1).. ' \n'<br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject())<br/><br/>    pT = pr..'10'<br/>    litteral='&quot;2.1&quot;^^&lt;'..xsd..&quot;decimal&quot;..'&gt;'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',2.1,xsd..&quot;decimal&quot;)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,2.1,xsd..&quot;decimal&quot;))<br/>    query= linkedwiki.getLastQuery()<br/>    mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/><br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(arr[1], 2.1).. ' \n'<br/><br/><br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject())<br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : without default subject&quot; ..'\n'<br/><br/>    local subject2 = linkedwiki.getCurrentIRI()..&quot;2&quot;;<br/><br/>    pT = pr..'11'<br/>    litteral='2'<br/>    html = html ..'Call  Linkedwiki.addPropertyWithLitteral('..pT..',2,nil,nil,subject2)'..'\n'<br/>    html = html ..&quot;Insert &quot;..litteral..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,2,nil,nil,subject2))<br/>    query= linkedwiki.getLastQuery()<br/>    mw.log(query)<br/>    html = html ..&quot;RESULT : &quot; .. p.checkLitteral(query,litteral) ..'\n'<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT,subject2))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr), 1).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(arr[1], 2).. ' \n'<br/><br/><br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject())<br/><br/>    html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br/>    html = html ..&quot;TEST : text with lang tag + function getString&quot; ..'\n'<br/>    --linkedwiki.getString(iriProperty, tagLang, iriSubject)<br/><br/>    pT = pr..'12'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',&quot;text&quot;)'..'\n'<br/>    html = html ..'Call Linkedwiki.addPropertyWithLitteral('..pT..',&quot;text2&quot;,nil,&quot;fr&quot;)'..'\n'<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,&quot;text&quot;))<br/>    mw.log(linkedwiki.addPropertyWithLitteral(pT,&quot;text2&quot;,nil,&quot;fr&quot;))<br/>    --query= linkedwiki.getLastQuery()<br/>    --mw.log(query)<br/>    arr = linkedwiki.explode(&quot;;&quot;,linkedwiki.getValue(pT))<br/>    html = html ..&quot;RESULT : Found &quot; ..table.getn(arr).. ' triple\n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkNumber(table.getn(arr),2).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkString(linkedwiki.getString(pT), &quot;text&quot;).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkString(linkedwiki.getString(pT,&quot;en&quot;), &quot;text&quot;).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkString(linkedwiki.getString(pT,&quot;fr&quot;), &quot;text2&quot;).. ' \n'<br/>    html = html ..&quot;RESULT : &quot; ..p.checkString(linkedwiki.getString(pT,&quot;fr&quot;,subject), &quot;text2&quot;).. ' \n'<br/><br/><br/>    html = html ..&quot;TEST : removeSubject&quot; ..'\n'<br/>    mw.log(linkedwiki.removeSubject())<br/><br/><br/>    return &quot;&lt;nowiki&gt;&lt;pre&gt;&quot;..mw.text.encode( html)..&quot;&lt;/pre&gt;&lt;/nowiki&gt;&quot;<br/>end<br/><br/>return p<br/>	</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=wpSave</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/index.php/LinkedWikiTestLua${Title}?action=edit</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=wpTextbox1</td>
	<td>{{#invoke: LinkedWikiTest${Title} | tests}}</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=wpSave</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/index.php/LinkedWikiTestLua${Title}?action=purge</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>css=button.oo-ui-inputWidget-input.oo-ui-buttonElement-button</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//div[@id='mw-content-text']/pre</td>
	<td>*TEST :*</td>
</tr>
<tr>
	<td>verifyNotText</td>
	<td>//div[@id='mw-content-text']/pre</td>
	<td>*KO*</td>
</tr>
</tbody></table>
</body>
</html>
