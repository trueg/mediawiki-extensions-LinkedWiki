<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://wiki.serverdev-mediawiki-v1/" />
<title>lua_function</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">lua_function</td></tr>
</thead><tbody>
<tr>
	<td>store</td>
	<td>javascript{&quot;TestPage&quot;+Math.random()}</td>
	<td>Title</td>
</tr>
<tr>
	<td>open</td>
	<td>/index.php?title=Module:LinkedWikiTest${Title}&amp;action=edit</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=wpTextbox1</td>
	<td>-- @copyright (c) 2016 Bourdercloud.com<br />-- @author Karima Rafes &lt;karima.rafes@bordercloud.com&gt;<br />-- @link https://www.mediawiki.org/wiki/Extension:LinkedWiki<br />-- @license CC-by-nc-sa V3.0<br />--<br />-- Last version: https://github.com/BorderCloud/LinkedWiki<br />--<br />--<br />-- This work is licensed under the Creative Commons<br />-- Attribution-NonCommercial-ShareAlike 3.0<br />-- Unported License. To view a copy of this license,<br />-- visit http://creativecommons.org/licenses/by-nc-sa/3.0/<br />-- or send a letter to Creative Commons,<br />-- 171 Second Street, Suite 300, San Francisco,<br />-- California, 94105, USA.<br /><br />-- @copyright (c) 2016 Bourdercloud.com<br />-- @author Karima Rafes &lt;karima.rafes@bordercloud.com&gt;<br />-- @link http://www.mediawiki.org/wiki/Extension:LinkedWiki<br />-- @license CC-by-nc-sa V3.0<br />--<br />-- Last version : http://github.com/BorderCloud/LinkedWiki<br />--<br />--<br />-- This work is licensed under the Creative Commons<br />-- Attribution-NonCommercial-ShareAlike 3.0<br />-- Unported License. To view a copy of this license,<br />-- visit http://creativecommons.org/licenses/by-nc-sa/3.0/<br />-- or send a letter to Creative Commons,<br />-- 171 Second Street, Suite 300, San Francisco,<br />-- California, 94105, USA.<br /><br />--[[<br />-- Debug console<br /><br />frame = mw.getCurrentFrame() -- Get a frame object<br />newFrame = frame:newChild{ -- Get one with args<br />	title = 'test' ,<br /> args = {<br /> iri = 'http://daap.eu/wiki/Lip(Sys)2/RamanEvolution_Spectrometer'<br /> }<br />}<br /><br />mw.log(p.tests(newFrame) )<br />]]<br /><br />local p = {}<br /><br />function p.checkLitteral(query, litteral)<br /> local result = ''<br /> if string.match(query, litteral) then<br /> result = &quot;OK&quot;<br /> else<br /> result = &quot;KO&quot;<br /> end<br /> return result<br />end<br /><br /><br />function p.checkString(val1, val2)<br /> local result = ''<br /> if (val1 == nil or val2 == nil) then<br /> result = &quot;KO1&quot;<br /> else<br /> if val1 == val2 then<br /> result = &quot;OK&quot;<br /> else<br /> result = &quot;KO2&quot;<br /> end<br /> end<br /> return result<br />end<br />function p.checkNumber(val1, val2)<br /> local result = ''<br /> if (val1 == nil or val2 == nil) then<br /> result = &quot;KO&quot;<br /> else<br /> if tonumber(val1) == tonumber(val2) then<br /> result = &quot;OK&quot;<br /> else<br /> result = &quot;KO&quot;<br /> end<br /> end<br /> return result<br />end<br /><br /><br />function p.tests(f)<br /><br /> local linkedwiki = require 'linkedwiki'<br /> local endpoint = 'http://database-test:8890/sparql'<br /> local config = 'http://database-test/data'<br /><br /><br /> local xsd = 'http://www.w3.org/2001/XMLSchema#'<br /> local rdfs = 'http://www.w3.org/2000/01/rdf-schema#'<br /> local wdt = 'http://www.wikidata.org/prop/direct/'<br /><br /> local pr = 'http://database-test/TestFunction:'<br /><br /> local html = '== TESTS =='.. '\n'<br /><br /> --linkedwiki.setDebug(true)<br /><br /> local subject = f.args.iri or linkedwiki.getCurrentIRI();<br /> html = html ..&quot;TEST : f.args.iri or linkedwiki.getCurrentIRI()&quot; .. '\n'<br /> html = html ..&quot;RESULT : &quot; .. subject .. '\n'<br /><br />local subject = linkedwiki.getCurrentIRI()<br /><br /><br />local objTest = linkedwiki.new(subject,config)<br /> local pTObjTemp1 = mw.title.new(&quot;Title1&quot;):fullUrl()<br /> local pTObjTemp2 = mw.title.new(&quot;Title2&quot;):fullUrl()<br /><br /> local ObjTemp1 = linkedwiki.new(pTObjTemp1);<br /> local ObjTemp2 = linkedwiki.new(pTObjTemp2);<br /><br /><br /><br /> mw.log(objTest:removeSubject())<br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : checkValue&quot; ..'\n'<br /> -- function linkedwiki.checkValue(property, valueInWiki)<br /> local valueInWiki = 0<br /> local result = &quot;&quot;<br /> local pT =&quot;&quot;<br /><br /> pT = pr..'1'<br /><br /> valueInWiki = &quot;1&quot;<br /> result = objTest:checkValue(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value&quot;&gt;1&lt;/div&gt;') ..'\n'<br /><br /> mw.log(objTest:addPropertyWithLitteral(pT,1))<br /><br /> valueInWiki = &quot;1&quot;<br /> result = objTest:checkValue(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;1&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;2&quot;<br /> result =objTest:checkValue(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : 1&quot;&gt;2&lt;/div&gt;') ..'\n'<br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : checkString&quot; ..'\n'<br />-- function objTest:checkString(property, valueInWiki, tagLang)<br /><br /> pT = pr..'2'<br /> valueInWiki = &quot;test&quot;<br /> result = objTest:checkString(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value&quot;&gt;test&lt;/div&gt;') ..'\n'<br /><br /> --mw.log(objTest:addPropertyWithLitteral(pT,&quot;test&quot;))<br /> mw.log(objTest:addPropertyString(pT,&quot;test&quot;))<br /><br /> valueInWiki = &quot;test&quot;<br /> result = objTest:checkString(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;test&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;testDifferent&quot;<br /> result = objTest:checkString(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : test&quot;&gt;testDifferent&lt;/div&gt;') ..'\n'<br /><br /><br /> --mw.log(objTest:addPropertyWithLitteral(pT,&quot;testfr&quot;,nil,&quot;fr&quot;))<br /> mw.log(objTest:addPropertyString(pT,&quot;testfr&quot;,&quot;fr&quot;))<br /><br /> valueInWiki = &quot;testfr&quot;<br /> result = objTest:checkString(pT,valueInWiki,&quot;fr&quot;)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; .. '\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;testfr&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;testfrDifferent&quot;<br /> result = objTest:checkString(pT,valueInWiki,&quot;fr&quot;)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : testfr&quot;&gt;testfrDifferent&lt;/div&gt;') ..'\n'<br /><br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : checkLabelOfInternLink&quot; ..'\n'<br /> -- function objTest:checkLabelOfInternLink(link, propertyOfLabel, labelInWiki, tagLang)<br /><br /> pT = pr..'3'<br /> valueInWiki = &quot;test&quot;<br /> local link = &quot;http://example.com/link&quot;<br /> result = objTest:checkLabelOfInternLink(link,pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://example.com/link test]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> mw.log(objTest:addPropertyWithLitteral(pT,&quot;test&quot;))<br /><br /> valueInWiki = &quot;test&quot;<br /> result = objTest:checkLabelOfInternLink(link,pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://example.com/link test]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;test2&quot;<br /> result = objTest:checkLabelOfInternLink(link,pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : test&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://example.com/link test2]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : checkIriOfExternLink&quot; ..'\n'<br /> -- function objTest:checkIriOfExternLink(labelOfExternLink, propertyOfExternLink, externLinkInWiki)<br /><br /> pT = pr..'4'<br /> valueInWiki = &quot;http://example.com/test&quot;<br /> result = objTest:checkIriOfExternLink(&quot;test&quot;,pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value&quot;&gt;[http://example.com/test test]&lt;/div&gt;') ..'\n'<br /><br /> mw.log(objTest:addPropertyWithIri(pT,&quot;http://example.com/test&quot;))<br /><br /> valueInWiki = &quot;http://example.com/test&quot;<br /> result = objTest:checkIriOfExternLink(&quot;test&quot;,pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;[http://example.com/test test]&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;http://example.com/test2&quot;<br /> result = objTest:checkIriOfExternLink(&quot;test&quot;,pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : http://example.com/test&quot;&gt;[http://example.com/test2 test]&lt;/div&gt;') ..'\n'<br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : checkImage&quot; ..'\n'<br />-- function objTest:checkImage(property, valueInWiki, width, height)<br /><br /> pT = pr..'5'<br /> valueInWiki = &quot;http://example.com/test.png&quot;<br /> result = objTest:checkImage(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value&quot;&gt;&lt;img src=&quot;http://example.com/test.png&quot; /&gt;&lt;/div&gt;') ..'\n'<br /><br /> mw.log(objTest:addPropertyWithIri(pT,&quot;http://example.com/test.png&quot;))<br /><br /> valueInWiki = &quot;http://example.com/test.png&quot;<br /> result = objTest:checkImage(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;img src=&quot;http://example.com/test.png&quot; /&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;http://example.com/test2.png&quot;<br /> result = objTest:checkImage(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : http://example.com/test.png&quot;&gt;&lt;img src=&quot;http://example.com/test2.png&quot; /&gt;&lt;/div&gt;') ..'\n'<br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : checkTitle&quot; ..'\n'<br /> -- objTest:checkTitle(property, labelInWiki, tagLang)<br /><br /> --objTest:setDebug(true)<br /> pT = pr..'6'<br /> local pTObjTemp1 = mw.title.new(&quot;Title1&quot;):fullUrl()<br /> local pTObjTemp2 = mw.title.new(&quot;Title2&quot;):fullUrl()<br /><br /> local ObjTemp1 = linkedwiki.new(pTObjTemp1,config);<br /> local ObjTemp2 = linkedwiki.new(pTObjTemp2,config);<br /><br />-- mw.log(objTest:getConfig())<br />-- mw.log(ObjTemp1:getConfig())<br />-- mw.log(ObjTemp2:getConfig())<br /> mw.log(objTest:removeSubject())<br /> mw.log(ObjTemp1:removeSubject())<br /> mw.log(ObjTemp2:removeSubject())<br /><br /> valueInWiki = &quot;&quot;<br /> --0 in DB<br /> result = objTest:checkTitle(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'') ..'\n'<br /><br /> valueInWiki = &quot;Title1;Title2&quot;<br /> --0 in DB<br /> result = objTest:checkTitle(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value&quot;&gt;[[Title1]], [[Title2]]&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot; Title1;Title2 &quot;<br /> --&quot;Title1&quot; in DB<br /> -- current - pT -&gt; pTObj<br /> -- pTObj - rdfs:label -&gt; &quot;Title1&quot;<br /> mw.log(objTest:addPropertyWithIri(pT, pTObjTemp1))<br /> --mw.log(ObjTemp1:addPropertyWithLitteral(rdfs..&quot;label&quot;,&quot;Title1&quot;))<br /> mw.log(ObjTemp1:addPropertyString(rdfs..&quot;label&quot;,&quot;Title1&quot;))<br /> -- mw.log(linkedwiki.getLastQuery())<br /> result = objTest:checkTitle(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : Title1&quot;&gt;[[Title2]]&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/Title1 Title1]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /><br /> valueInWiki = &quot;Title1 ; Title2&quot;<br /> --&quot;Title1;Title2&quot; in DB<br /> --&quot;Title1&quot; in DB<br /> -- current - pT -&gt; pTObj2<br /> -- pTObj2 - rdfs:label -&gt; &quot;Title2&quot;<br /> mw.log(objTest:addPropertyWithIri(pT,pTObjTemp2))<br /> --mw.log(objTest:addPropertyWithLitteral(rdfs..&quot;label&quot;,&quot;Title2&quot;,nil,nil,pTObj2))<br /> mw.log(ObjTemp2:addPropertyString(rdfs..&quot;label&quot;,&quot;Title2&quot;))<br /> result = objTest:checkTitle(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/Title1 Title1]&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/Title2 Title2]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;&quot;<br /> --&quot;Title1;Title2&quot; in DB<br /> result = objTest:checkTitle(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/Title1 Title1]&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/Title2 Title2]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : checkUser&quot; ..'\n'<br />-- function objTest:checkUser(property, valueInWiki)<br /><br /><br /> mw.log(objTest:removeSubject())<br /><br /> pT = pr..'7'<br /><br /> local pTObjTemp1 = mw.title.new(&quot;User:Firstname Surename1&quot;):fullUrl()<br /> local pTObjTemp2 = mw.title.new(&quot;User:Firstname Surename2&quot;):fullUrl()<br /><br /> local ObjTemp1 = linkedwiki.new(pTObjTemp1,config)<br /> local ObjTemp2 = linkedwiki.new(pTObjTemp2,config)<br /><br /> mw.log(objTest:removeSubject())<br /> mw.log(ObjTemp1:removeSubject())<br /> mw.log(ObjTemp2:removeSubject())<br /><br /> valueInWiki = &quot;&quot;<br /> --0 in DB<br /> result = objTest:checkUser(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'') ..'\n'<br /><br /> valueInWiki = &quot;User1;User2&quot;<br /> --0 in DB<br /> result = objTest:checkUser(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value&quot;&gt;[[User:User1|User1]], [[User:User2|User2]]&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;&quot;<br /> --&quot;User:Firstname Surename1&quot; in DB<br /> -- current - pT -&gt; pTObj<br /> -- pTObj - rdfs:label -&gt; &quot;User:Firstname Surename1&quot;<br /> mw.log(objTest:addPropertyWithIri(pT, pTObjTemp1))<br /> mw.log(ObjTemp1:addPropertyWithLitteral(rdfs..&quot;label&quot;,&quot;Firstname Surename1&quot;))<br /> result = objTest:checkUser(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename1 Firstname Surename1]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;Firstname Surename1; Firstname Surename2&quot;<br /> result = objTest:checkUser(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : Firstname Surename1&quot;&gt;[[User:Firstname Surename2|Firstname Surename2]]&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename1 Firstname Surename1]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;Firstname Surename1; Firstname Surename2&quot;<br /> --&quot;User:Firstname Surename1;User:Firstname Surename2&quot; in DB<br /> --&quot;User:Firstname Surename2&quot; in DB<br /> -- current - pT -&gt; pTObj2<br /> -- pTObj2 - rdfs:label -&gt; &quot;User:Firstname Surename2&quot;<br /> mw.log(objTest:addPropertyWithIri(pT,pTObjTemp2))<br /> mw.log(ObjTemp2:addPropertyWithLitteral(rdfs..&quot;label&quot;,&quot;Firstname Surename2&quot;))<br /> result = objTest:checkUser(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename1 Firstname Surename1]&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename2 Firstname Surename2]&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;Firstname Surename1; Firstname Surename2&quot;<br /> --&quot;User:Firstname Surename1;User:Firstname Surename2&quot; in DB<br /> --&quot;mailto:Firstname_Surename2@example.com&quot; ADD in DB<br /> -- current - pT -&gt; pTObj2<br /> -- pTObj2 - http://www.w3.org/2006/vcard/ns#email -&gt; &quot;mailto:Firstname_Surename2@example.com&quot;<br /> mw.log(ObjTemp2:addPropertyWithIri(&quot;http://www.w3.org/2006/vcard/ns#email&quot;,&quot;mailto:Firstname_Surename2@example.com&quot;))<br /> result = objTest:checkUser(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename1 Firstname Surename1]&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename2 Firstname Surename2]&lt;/span&gt;&lt;sub&gt;&lt;span class=&quot;plainlinks&quot; style=&quot;font-size: large;&quot;&gt;[mailto:Firstname_Surename2@example.com ✉]&lt;/span&gt;&lt;/sub&gt;&lt;/div&gt;') ..'\n'<br /><br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..ObjTemp2:getValue(&quot;http://www.w3.org/2006/vcard/ns#email&quot;) ..'\n'..&quot;END&quot; ..'\n'<br /><br /><br /><br /> valueInWiki = &quot;Firstname Surename1; Firstname Surename2&quot;<br /> --&quot;User:Firstname Surename1;User:Firstname Surename2&quot; in DB<br /> --&quot;mailto:Firstname_Surename2@example.com&quot; ADD in DB<br /> -- current - pT -&gt; pTObj2<br /> -- pTObj2 - http://www.w3.org/2006/vcard/ns#email -&gt; &quot;mailto:Firstname_Surename2@example.com&quot;<br /> mw.log(ObjTemp2:addPropertyWithIri(&quot;http://www.w3.org/2006/vcard/ns#email&quot;,&quot;mailto:Firstname_Surename2Bis@example.com&quot;))<br /> result = objTest:checkUser(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename1 Firstname Surename1]&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename2 Firstname Surename2]&lt;/span&gt;&lt;sub&gt;&lt;span class=&quot;plainlinks&quot; style=&quot;font-size: large;&quot;&gt;[mailto:Firstname_Surename2@example.com ✉]&lt;/span&gt;&lt;/sub&gt;&lt;sub&gt;&lt;span class=&quot;plainlinks&quot; style=&quot;font-size: large;&quot;&gt;[mailto:Firstname_Surename2Bis@example.com ✉]&lt;/span&gt;&lt;/sub&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;&quot;<br /> --&quot;Title1;Title2&quot; in DB<br /> result = objTest:checkUser(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename1 Firstname Surename1]&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[http://wiki.serverdev-mediawiki-v1/index.php/User:Firstname_Surename2 Firstname Surename2]&lt;/span&gt;&lt;sub&gt;&lt;span class=&quot;plainlinks&quot; style=&quot;font-size: large;&quot;&gt;[mailto:Firstname_Surename2@example.com ✉]&lt;/span&gt;&lt;/sub&gt;&lt;sub&gt;&lt;span class=&quot;plainlinks&quot; style=&quot;font-size: large;&quot;&gt;[mailto:Firstname_Surename2Bis@example.com ✉]&lt;/span&gt;&lt;/sub&gt;&lt;/div&gt;') ..'\n'<br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /><br /> html = html ..&quot;TEST : checkItem&quot; ..'\n'<br /> -- function objTest:checkItem(property, valueInWiki, tagLang)<br /><br /> mw.log(objTest:removeSubject())<br /> --objTest:setDebug(true)<br /><br /> pT = pr..'8'<br /> local wd = &quot;http://www.wikidata.org/entity/&quot;<br /> local pTObjTemp1 = wd..&quot;Q1&quot;<br /> local pTObjTemp2 = wd..&quot;Q2&quot;<br /> local ObjTemp1 = linkedwiki.new(pTObjTemp1,config)<br /> local ObjTemp2 = linkedwiki.new(pTObjTemp2,config)<br /><br /> mw.log(objTest:removeSubject())<br /> mw.log(ObjTemp1:removeSubject())<br /> mw.log(ObjTemp2:removeSubject())<br /><br /> valueInWiki = &quot;&quot;<br /> --0 in DB<br /> result = objTest:checkItem(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'') ..'\n'<br /><br /> valueInWiki = &quot;Q1 ; Q2 &quot;<br /> --0 in DB<br /> result = objTest:checkItem(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /><br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q2 Earth]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q2 Q2])&lt;/small&gt;&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q1 universe]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q1 Q1])&lt;/small&gt;&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /><br /> valueInWiki = &quot;&quot;<br /> --&quot;universe&quot; in DB<br /> -- current - pT -&gt; pTObj<br /> -- pTObj - rdfs:label -&gt; &quot;universe&quot;<br /> mw.log(objTest:addPropertyWithIri(pT, pTObjTemp1))<br /> mw.log(ObjTemp1:addPropertyWithLitteral(rdfs..&quot;label&quot;,&quot;universe&quot;))<br /> result = objTest:checkItem(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /><br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q1 universe]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q1 Q1])&lt;/small&gt;&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /><br /> valueInWiki = &quot;Q1;Q2&quot;<br /> --&quot;universe&quot; in DB<br /> result = objTest:checkItem(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /><br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : universe&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q2 Earth]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q2 Q2])&lt;/small&gt;&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q1 universe]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q1 Q1])&lt;/small&gt;&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot; Q1 ; Q2 &quot;<br /> --&quot;Title1;Title2&quot; in DB<br /> --&quot;Title1&quot; in DB<br /> -- current - pT -&gt; pTObj2<br /> -- pTObj2 - rdfs:label -&gt; &quot;Title2&quot;<br /> mw.log(objTest:addPropertyWithIri(pT,pTObjTemp2))<br /> mw.log(ObjTemp2:addPropertyWithLitteral(rdfs..&quot;label&quot;,&quot;Earth&quot;))<br /> result = objTest:checkItem(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q2 Earth]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q2 Q2])&lt;/small&gt;&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q1 universe]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q1 Q1])&lt;/small&gt;&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;&quot;<br /> --&quot;Title1;Title2&quot; in DB<br /> result = objTest:checkItem(pT,valueInWiki)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;&lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q2 Earth]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q2 Q2])&lt;/small&gt;&lt;/span&gt;, &lt;span class=&quot;plainlinks&quot;&gt;[https://www.wikidata.org/wiki/Special:GoToLinkedPage/enwiki/Q1 universe]&lt;/span&gt;&lt;span class=&quot;plainlinks&quot;&gt;&lt;small&gt;([http://www.wikidata.org/entity/Q1 Q1])&lt;/small&gt;&lt;/span&gt;&lt;/div&gt;') ..'\n'<br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : printDateInWiki&quot; ..'\n'<br /> --Linkedwiki:printDateInWiki(format, valueInWiki, valueInDB)<br /><br /> local dateFormat = &quot;d M Y&quot;<br /> -- {{#time:d M Y|2004-12-06}}<br /> --&quot;2004-12-06&quot;^^xsd..'date'<br /> result = objTest:printDateInWiki( &quot;2004-12-06&quot;, &quot;2004-12-06&quot;, dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;06 Dec 2004&lt;/div&gt;') ..'\n'<br /><br /> result = objTest:printDateInWiki(&quot;2004-12-07&quot;, &quot;2004-12-06&quot;,dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : 06 Dec 2004&quot;&gt;07 Dec 2004&lt;/div&gt;') ..'\n'<br /><br /> html = html ..&quot;----------------------------------------------------------------------------&quot; ..'\n'<br /> html = html ..&quot;TEST : checkDate&quot; ..'\n'<br /><br /> dateFormat = &quot;d M Y&quot;<br /> local pTDate = 'http://example.com/date'<br /> local pTDateTime = 'http://example.com/dateTime'<br /><br /> valueInWiki = &quot;&quot;<br /> --0 in DB<br /> result = objTest:checkDate(pTDate,valueInWiki, dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'') ..'\n'<br /><br /> valueInWiki = &quot;2004-12-06&quot;<br /> --0 in DB<br /> result = objTest:checkDate(pTDate,valueInWiki, dateFormat)<br /> html = html ..&quot;BEGIN : &quot;..'\n' ..valueInWiki ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div&gt;06 Dec 2004&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;&quot;<br /> --&quot;2004-12-06&quot; in DB<br /> -- current - pT -&gt; &quot;2004-12-06&quot;<br /> mw.log(objTest:addProperty(pTDate,&quot;2004-12-06&quot;,xsd..'date'))<br /> result = objTest:checkDate(pTDate,valueInWiki, dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div&gt;06 Dec 2004&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;2004-12-06&quot;<br /> --&quot;2004-12-06&quot; in DB<br /> result = objTest:checkDate(pTDate,valueInWiki, dateFormat)<br /> html = html ..&quot;RESULT BEGIN11 : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;06 Dec 2004&lt;/div&gt;') ..'\n'<br /><br /> --&quot;2004-12-06&quot; in DB<br /> -- current - pT -&gt; &quot;2004-12-06&quot;<br /> mw.log(objTest:addProperty(pTDateTime,&quot;2004-12-06T00:00:00Z&quot;,xsd..'dateTime'))<br /> result = objTest:checkDate(pTDateTime,valueInWiki, dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_value_equal&quot;&gt;06 Dec 2004&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;&quot;<br /> --&quot;2004-12-06T00:00:00Z&quot; in DB<br /> result = objTest:checkDate(pTDateTime,valueInWiki, dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div&gt;06 Dec 2004&lt;/div&gt;') ..'\n'<br /><br /> valueInWiki = &quot;2004-12-07&quot;<br /> --&quot;2004-12-06&quot; in DB<br /> result = objTest:checkDate(pTDate,valueInWiki, dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /><br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : 06 Dec 2004&quot;&gt;07 Dec 2004&lt;/div&gt;') ..'\n'<br /><br /> local idConfigWikidata ='http://www.wikidata.org'<br /> local taglang ='fr'<br /> iriWikidata = wd .. &quot;Q132845&quot;<br /> objWikidata = linkedwiki.new(iriWikidata,idConfigWikidata,taglang)<br /> result = objWikidata:checkDate(wdt..&quot;P569&quot;,&quot;1100-1-1&quot;,dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div class=&quot;linkedwiki_new_value linkedwiki_tooltip&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; title=&quot;Currently in DB : not a date&quot;&gt;01 Jan 1100&lt;/div&gt;') ..'\n'<br /><br /> objWikidata = linkedwiki.new(iriWikidata,idConfigWikidata,taglang)<br /> result = objWikidata:checkDate(wdt..&quot;P569&quot;,&quot;&quot;,dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div&gt;&lt;strong class=&quot;error&quot;&gt;Error: Invalid time.&lt;/strong&gt;&lt;/div&gt;') ..'\n'<br /><br /> objWikidata = linkedwiki.new(iriWikidata,idConfigWikidata,taglang)<br /> result = objWikidata:checkDate(wdt..&quot;P569&quot;,&quot;Truc&quot;,dateFormat)<br /> html = html ..&quot;RESULT BEGIN : &quot;..'\n' ..result ..'\n'..&quot;END&quot; ..'\n'<br /> html = html ..&quot;RESULT : &quot; .. p.checkString(result,'&lt;div&gt;Error is not a date (0000-00-00) : Truc&lt;/div&gt;') ..'\n'<br /><br />-- mw.log(linkedwiki.getLastQuery())<br /> mw.log(objTest:removeSubject())<br /><br /><br /> --return html<br /> return &quot;&lt;nowiki&gt;&lt;pre&gt;&quot;..mw.text.encode( html)..&quot;&lt;/pre&gt;&lt;/nowiki&gt;&quot;<br /><br />end<br /><br />return p<br /><br />	</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=wpSave</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/index.php/LinkedWikiTestLua${Title}?action=edit</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=wpTextbox1</td>
	<td>{{#invoke: LinkedWikiTest${Title} | tests}}</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>name=wpSave</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>/index.php/LinkedWikiTestLua${Title}?action=purge</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>css=button.oo-ui-inputWidget-input.oo-ui-buttonElement-button</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//div[@id='mw-content-text']/pre</td>
	<td>*TEST :*</td>
</tr>
<tr>
	<td>verifyNotText</td>
	<td>//div[@id='mw-content-text']/pre</td>
	<td>*KO*</td>
</tr>
</tbody></table>
</body>
</html>
